<!DOCTYPE html>
<html lang="en">
<head>
ยยยย<meta charset="UTF-8">
ยยยย<meta name="viewport" content="width=device-width, initial-scale=1.0">
ยยยย<title>KRYON AGENT - Hostinger Edition</title>
ยยยย<script src="https://cdn.tailwindcss.com"></script>
ยยยย<link href="https://cdn.jsdelivr.net/npm/lucide-static@0.344.0/font/lucide.min.css" rel="stylesheet">
ยยยย<style>
ยยยยยยยยbody { background-color: black; color: white; font-family: sans-serif; overflow: hidden; }
ยยยยยยยย.cyber-bg {
ยยยยยยยยยยยยposition: absolute; inset: 0; z-index: -1; opacity: 0.1;
ยยยยยยยยยยยยbackground-image: url('https://grainy-gradients.vercel.app/noise.svg');
ยยยยยยยย}
ยยยยยยยย.glass {
ยยยยยยยยยยยยbackground: rgba(10, 10, 10, 0.6); backdrop-filter: blur(12px);
ยยยยยยยยยยยยborder: 1px solid rgba(255, 255, 255, 0.1);
ยยยยยยยย}
ยยยยยยยย/* Custom Scrollbar */
ยยยยยยยย::-webkit-scrollbar { width: 5px; }
ยยยยยยยย::-webkit-scrollbar-thumb { background: #333; border-radius: 5px; }
ยยยย</style>
</head>
<body class="flex flex-col h-screen">

ยยยย<div class="cyber-bg"></div>

ยยยย<header class="p-4 flex justify-between glass items-center z-10">
ยยยยยยยย<div class="flex items-center gap-3">
ยยยยยยยยยยยย<div class="w-10 h-10 rounded-lg bg-blue-600 flex items-center justify-center font-bold text-xl">K</div>
ยยยยยยยยยยยย<div>
ยยยยยยยยยยยยยยยย<h1 class="font-bold text-sm tracking-wider">KRYON AGENT</h1>
ยยยยยยยยยยยยยยยย<div class="text-[10px] text-green-400 font-mono">โ SYSTEM ONLINE</div>
ยยยยยยยยยยยย</div>
ยยยยยยยย</div>
ยยยยยยยย<button onclick="logout()" class="text-gray-400 hover:text-white">Logout</button>
ยยยย</header>

ยยยย<div id="chat-container" class="flex-1 overflow-y-auto p-4 space-y-4 z-10">
ยยยยยยยย<div class="flex justify-start">
ยยยยยยยยยยยย<div class="glass p-3 rounded-xl text-sm max-w-[85%] border border-white/10">
ยยยยยยยยยยยยยยยยเคจเคฎเคธเฅเคคเฅ Boss! ๐ง<br>เคฎเฅเค Kryon Agent เคนเฅเคเฅค Hostinger เคชเคฐ เคฒเคพเคเคต เคนเฅเคเฅค เคเคฆเฅเคถ เคฆเฅเค!
ยยยยยยยยยยยย</div>
ยยยยยยยย</div>
ยยยย</div>

ยยยย<div id="status-bar" class="hidden flex justify-center py-2 z-10">
ยยยยยยยย<div class="glass px-4 py-1 rounded-full text-xs text-blue-400 flex gap-2 items-center">
ยยยยยยยยยยยย<span class="animate-spin">โ๏ธ</span> <span id="status-text">Processing...</span>
ยยยยยยยย</div>
ยยยย</div>

ยยยย<div class="p-4 glass z-10">
ยยยยยยยย<div class="flex gap-2 bg-black/40 p-2 rounded-xl border border-white/10">
ยยยยยยยยยยยย<input type="file" id="fileInput" hidden onchange="handleFileSelect(this)">
ยยยยยยยยยยยย<button onclick="document.getElementById('fileInput').click()" class="p-2 text-gray-400 hover:text-white">๐</button>
ยยยยยยยยยยยย
ยยยยยยยยยยยย<input type="text" id="userInput" placeholder="Describe your video..." 
ยยยยยยยยยยยยยยยยclass="flex-1 bg-transparent outline-none text-sm text-white" 
ยยยยยยยยยยยยยยยยonkeydown="if(event.key==='Enter') sendMessage()">
ยยยยยยยยยยยย
ยยยยยยยยยยยย<button onclick="sendMessage()" class="p-2 bg-blue-600 rounded-lg hover:bg-blue-700">๐</button>
ยยยยยยยย</div>
ยยยยยยยย<div id="file-preview" class="text-xs text-blue-400 mt-2 hidden"></div>
ยยยย</div>

ยยยย<script type="module">
ยยยยยยยยimport { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
ยยยยยยยยimport { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
ยยยยยยยยimport { GoogleGenerativeAI } from "https://esm.run/@google/generative-ai";

ยยยยยยยย// --- CONFIGURATION ---
ยยยยยยยยconst FACTORY_URL = "https://peaky-melia-unminuted.ngrok-free.dev/generate"; // ๐ฅ CHANGE NGROK HERE IF NEEDED
ยยยยยยยยconst GEMINI_API_KEY = "AIzaSyBpGVQg3vu0TkakUfa-Bk0Tors0KFiCyxs";
ยยยยยยยย
ยยยยยยยยconst firebaseConfig = {
ยยยยยยยยยยยยapiKey: "AIzaSyApjvxJKu8eX4SHMGNqnPjgYfNA6kU9RJ0",
ยยยยยยยยยยยยauthDomain: "kryon-ai.firebaseapp.com",
ยยยยยยยยยยยยprojectId: "kryon-ai",
ยยยยยยยยยยยยstorageBucket: "kryon-ai.firebasestorage.app",
ยยยยยยยยยยยยmessagingSenderId: "1044519521968",
ยยยยยยยยยยยยappId: "1:1044519521968:web:a5e3754dc77c3efe46b575"
ยยยยยยยย};

ยยยยยยยย// Init Firebase
ยยยยยยยยconst app = initializeApp(firebaseConfig);
ยยยยยยยยconst auth = getAuth(app);
ยยยยยยยยconst provider = new GoogleAuthProvider();
ยยยยยยยยconst genAI = new GoogleGenerativeAI(GEMINI_API_KEY);
ยยยยยยยยconst model = genAI.getGenerativeModel({ model: "gemini-pro" });

ยยยยยยยยlet currentUser = null;
ยยยยยยยยlet currentFile = null;

ยยยยยยยย// Auth Listener
ยยยยยยยยonAuthStateChanged(auth, (user) => {
ยยยยยยยยยยยยif (user) {
ยยยยยยยยยยยยยยยยcurrentUser = user;
ยยยยยยยยยยยยยยยย// Add login message if needed
ยยยยยยยยยยยย} else {
ยยยยยยยยยยยยยยยยsignInWithPopup(auth, provider);
ยยยยยยยยยยยย}
ยยยยยยยย});

ยยยยยยยยwindow.logout = () => signOut(auth);

ยยยยยยยย// File Handling
ยยยยยยยยwindow.handleFileSelect = (input) => {
ยยยยยยยยยยยยif (input.files && input.files[0]) {
ยยยยยยยยยยยยยยยยcurrentFile = input.files[0];
ยยยยยยยยยยยยยยยยdocument.getElementById('file-preview').innerText = "๐ Selected: " + currentFile.name;
ยยยยยยยยยยยยยยยยdocument.getElementById('file-preview').classList.remove('hidden');
ยยยยยยยยยยยย}
ยยยยยยยย}

ยยยยยยยย// Main Send Function
ยยยยยยยยwindow.sendMessage = async () => {
ยยยยยยยยยยยยconst inputEl = document.getElementById('userInput');
ยยยยยยยยยยยยconst text = inputEl.value;
ยยยยยยยยยยยยif (!text && !currentFile) return;

ยยยยยยยยยยยย// 1. Show User Message
ยยยยยยยยยยยยaddMessage(text, 'user', currentFile ? currentFile.name : null);
ยยยยยยยยยยยยinputEl.value = '';
ยยยยยยยยยยยยdocument.getElementById('file-preview').classList.add('hidden');
ยยยยยยยยยยยย
ยยยยยยยยยยยยsetStatus("๐ง Brain is thinking...");

ยยยยยยยยยยยยlet finalPrompt = text;

ยยยยยยยยยยยย// 2. Gemini Magic (if no file)
ยยยยยยยยยยยยif (!currentFile) {
ยยยยยยยยยยยยยยยยtry {
ยยยยยยยยยยยยยยยยยยยยconst result = await model.generateContent(`Act as Video Director. Create a visual prompt for: "${text}". Output only the prompt.`);
ยยยยยยยยยยยยยยยยยยยยfinalPrompt = result.response.text();
ยยยยยยยยยยยยยยยยยยยยaddMessage(`๐ก Concept: ${finalPrompt}`, 'ai-brain');
ยยยยยยยยยยยยยยยย} catch (e) { console.error(e); }
ยยยยยยยยยยยย}

ยยยยยยยยยยยย// 3. Send to Factory
ยยยยยยยยยยยยsetStatus("โณ Queue Position: #1 (Sending to Factory...)");
ยยยยยยยยยยยย
ยยยยยยยยยยยยtry {
ยยยยยยยยยยยยยยยยconst response = await fetch(FACTORY_URL, {
ยยยยยยยยยยยยยยยยยยยยmethod: "POST",
ยยยยยยยยยยยยยยยยยยยยheaders: { "Content-Type": "application/json" },
ยยยยยยยยยยยยยยยยยยยยbody: JSON.stringify({
ยยยยยยยยยยยยยยยยยยยยยยยยprompt: finalPrompt,
ยยยยยยยยยยยยยยยยยยยยยยยยemail: currentUser ? currentUser.email : "guest@kryon.ai",
ยยยยยยยยยยยยยยยยยยยยยยยยtype: currentFile ? "file_mode" : "gen_mode"
ยยยยยยยยยยยยยยยยยยยย})
ยยยยยยยยยยยยยยยย});

ยยยยยยยยยยยยยยยยconst data = await response.json();
ยยยยยยยยยยยยยยยย
ยยยยยยยยยยยยยยยยsetStatus("");
ยยยยยยยยยยยยยยยย
ยยยยยยยยยยยยยยยย// Show Success or Video
ยยยยยยยยยยยยยยยยif (data.video_url || data.status === "processing") {
ยยยยยยยยยยยยยยยยยยยยaddMessage("โ Video Generation Started! Check Factory Folder.", 'ai-success');
ยยยยยยยยยยยยยยยย} else {
ยยยยยยยยยยยยยยยยยยยยaddMessage("โ Command Sent!", 'ai-success');
ยยยยยยยยยยยยยยยย}
ยยยยยยยยยยยยยยยย
ยยยยยยยยยยยยยยยยcurrentFile = null;

ยยยยยยยยยยยย} catch (error) {
ยยยยยยยยยยยยยยยยconsole.error(error);
ยยยยยยยยยยยยยยยยsetStatus("");
ยยยยยยยยยยยยยยยยaddMessage("โ๏ธ Factory Error. Is Ngrok running?", 'error');
ยยยยยยยยยยยย}
ยยยยยยยย};

ยยยยยยยย// Helpers
ยยยยยยยยfunction addMessage(text, type, attachment = null) {
ยยยยยยยยยยยยconst container = document.getElementById('chat-container');
ยยยยยยยยยยยยconst div = document.createElement('div');
ยยยยยยยยยยยย
ยยยยยยยยยยยยlet bgClass = "glass border border-white/10";
ยยยยยยยยยยยยlet justify = "justify-start";
ยยยยยยยยยยยย
ยยยยยยยยยยยยif (type === 'user') {
ยยยยยยยยยยยยยยยยbgClass = "bg-blue-600";
ยยยยยยยยยยยยยยยยjustify = "justify-end";
ยยยยยยยยยยยย} else if (type === 'ai-brain') {
ยยยยยยยยยยยยยยยยtext = "โจ " + text;
ยยยยยยยยยยยย}

ยยยยยยยยยยยยdiv.className = `flex ${justify}`;
ยยยยยยยยยยยยdiv.innerHTML = `
ยยยยยยยยยยยยยยยย<div class="${bgClass} p-3 rounded-xl text-sm max-w-[85%]">
ยยยยยยยยยยยยยยยยยยยย${attachment ? `<div class="text-xs opacity-70 mb-1">๐ ${attachment}</div>` : ''}
ยยยยยยยยยยยยยยยยยยยย${text}
ยยยยยยยยยยยยยยยย</div>
ยยยยยยยยยยยย`;
ยยยยยยยยยยยยcontainer.appendChild(div);
ยยยยยยยยยยยยcontainer.scrollTop = container.scrollHeight;
ยยยยยยยย}

ยยยยยยยยfunction setStatus(msg) {
ยยยยยยยยยยยยconst bar = document.getElementById('status-bar');
ยยยยยยยยยยยยconst text = document.getElementById('status-text');
ยยยยยยยยยยยยif (msg) {
ยยยยยยยยยยยยยยยยbar.classList.remove('hidden');
ยยยยยยยยยยยยยยยยtext.innerText = msg;
ยยยยยยยยยยยย} else {
ยยยยยยยยยยยยยยยยbar.classList.add('hidden');
ยยยยยยยยยยยย}
ยยยยยยยย}
ยยยย</script>
</body>
</html>

